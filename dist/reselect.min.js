/*!
 * reselect
 * https://github.com/alexcheuk/Reselect
<<<<<<< HEAD
 * Version: 0.0.1 - 2016-04-29T19:10:25.789Z
 * License: MIT
 */
(function(){"use strict";!function(e){function t(){console.log.apply(console,arguments)}function n(e,t){var n,o,i,r;for(this.list=e,this.options=t=t||{},n=0,r=["sort","shouldSort","verbose","tokenize"],o=r.length;o>n;n++)i=r[n],this.options[i]=i in t?t[i]:a[i];for(n=0,r=["searchFn","sortFn","keys","getFn","include"],o=r.length;o>n;n++)i=r[n],this.options[i]=t[i]||a[i]}function o(e,t,n){var r,s,a,c,l,p;if(t){if(a=t.indexOf("."),-1!==a?(r=t.slice(0,a),s=t.slice(a+1)):r=t,c=e[r],null!==c&&void 0!==c)if(s||"string"!=typeof c&&"number"!=typeof c)if(i(c))for(l=0,p=c.length;p>l;l++)o(c[l],s,n);else s&&o(c,s,n);else n.push(c)}else n.push(e);return n}function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function r(e,t){t=t||{},this.options=t,this.options.location=t.location||r.defaultOptions.location,this.options.distance="distance"in t?t.distance:r.defaultOptions.distance,this.options.threshold="threshold"in t?t.threshold:r.defaultOptions.threshold,this.options.maxPatternLength=t.maxPatternLength||r.defaultOptions.maxPatternLength,this.pattern=t.caseSensitive?e:e.toLowerCase(),this.patternLen=e.length,this.patternLen<=this.options.maxPatternLength&&(this.matchmask=1<<this.patternLen-1,this.patternAlphabet=this._calculatePatternAlphabet())}var s=/ +/g,a={id:null,caseSensitive:!1,include:[],shouldSort:!0,searchFn:r,sortFn:function(e,t){return e.score-t.score},getFn:o,keys:[],verbose:!1,tokenize:!1};n.VERSION="2.2.0",n.prototype.set=function(e){return this.list=e,e},n.prototype.search=function(e){this.options.verbose&&t("\nSearch term:",e,"\n"),this.pattern=e,this.results=[],this.resultMap={},this._keyMap=null,this._prepareSearchers(),this._startSearch(),this._computeScore(),this._sort();var n=this._format();return n},n.prototype._prepareSearchers=function(){var e=this.options,t=this.pattern,n=e.searchFn,o=t.split(s),i=0,r=o.length;if(this.options.tokenize)for(this.tokenSearchers=[];r>i;i++)this.tokenSearchers.push(new n(o[i],e));this.fullSeacher=new n(t,e)},n.prototype._startSearch=function(){var e,t,n,o,i=this.options,r=i.getFn,s=this.list,a=s.length,c=this.options.keys,l=c.length,p=null;if("string"==typeof s[0])for(n=0;a>n;n++)this._analyze("",s[n],n,n);else for(this._keyMap={},n=0;a>n;n++)for(p=s[n],o=0;l>o;o++){if(e=c[o],"string"!=typeof e){if(t=1-e.weight||1,this._keyMap[e.name]={weight:t},e.weight<=0||e.weight>1)throw new Error("Key weight has to be > 0 and <= 1");e=e.name}else this._keyMap[e]={weight:1};this._analyze(e,r(p,e,[]),p,n)}},n.prototype._analyze=function(e,n,o,r){var a,c,l,p,h,u,d,f,g,m,v,y,$,w,D,A=this.options,C=!1;if(void 0!==n&&null!==n)if(c=[],"string"==typeof n){if(a=n.split(s),A.verbose&&t("---------\nKey:",e),A.verbose&&t("Record:",a),this.options.tokenize){for(l=this.tokenSearchers,p=l.length,w=0;w<this.tokenSearchers.length;w++){for(m=this.tokenSearchers[w],v=[],D=0;D<a.length;D++)y=a[D],$=m.search(y),$.isMatch?(C=!0,v.push($.score),c.push($.score)):(v.push(1),c.push(1));A.verbose&&t("Token scores:",v)}for(u=c[0],f=c.length,w=1;f>w;w++)u+=c[w];u/=f,A.verbose&&t("Token score average:",u)}g=this.fullSeacher.search(n),A.verbose&&t("Full text score:",g.score),d=g.score,void 0!==u&&(d=(d+u)/2),A.verbose&&t("Score average:",d),(C||g.isMatch)&&(h=this.resultMap[r],h?h.output.push({key:e,score:d,matchedIndices:g.matchedIndices}):(this.resultMap[r]={item:o,output:[{key:e,score:d,matchedIndices:g.matchedIndices}]},this.results.push(this.resultMap[r])))}else if(i(n))for(w=0;w<n.length;w++)this._analyze(e,n[w],o,r)},n.prototype._computeScore=function(){var e,n,o,i,r,s,a,c,l,p=this._keyMap,h=this.results;for(this.options.verbose&&t("\n\nComputing score:\n"),e=0;e<h.length;e++){for(o=0,i=h[e].output,r=i.length,c=1,n=0;r>n;n++)s=i[n].score,a=p?p[i[n].key].weight:1,l=s*a,1!==a?c=Math.min(c,l):(o+=l,i[n].nScore=l);h[e].score=1===c?o/r:c,this.options.verbose&&t(h[e])}},n.prototype._sort=function(){var e=this.options;e.shouldSort&&(e.verbose&&t("\n\nSorting...."),this.results.sort(e.sortFn))},n.prototype._format=function(){var e,n,o,i,r,s=this.options,a=s.getFn,c=[],l=this.results,p=s.include;for(s.verbose&&t("\n\nOutput:\n\n",l),i=s.id?function(e){l[e].item=a(l[e].item,s.id,[])[0]}:function(){},r=function(e){var t,n,o,i,r,s=l[e];if(p.length>0){if(t={item:s.item},-1!==p.indexOf("matches"))for(o=s.output,t.matches=[],n=0;n<o.length;n++)i=o[n],r={indices:i.matchedIndices},i.key&&(r.key=i.key),t.matches.push(r);-1!==p.indexOf("score")&&(t.score=l[e].score)}else t=s.item;return t},n=0,o=l.length;o>n;n++)i(n),e=r(n),c.push(e);return c},r.defaultOptions={location:0,distance:100,threshold:.6,maxPatternLength:32},r.prototype._calculatePatternAlphabet=function(){var e={},t=0;for(t=0;t<this.patternLen;t++)e[this.pattern.charAt(t)]=0;for(t=0;t<this.patternLen;t++)e[this.pattern.charAt(t)]|=1<<this.pattern.length-t-1;return e},r.prototype._bitapScore=function(e,t){var n=e/this.patternLen,o=Math.abs(this.options.location-t);return this.options.distance?n+o/this.options.distance:o?1:n},r.prototype.search=function(e){var t,n,o,i,r,a,c,l,p,h,u,d,f,g,m,v,y,$,w,D,A,C,_=this.options;if(e=_.caseSensitive?e:e.toLowerCase(),this.pattern===e)return{isMatch:!0,score:0,matchedIndices:[[0,e.length-1]]};if(this.patternLen>_.maxPatternLength){if(y=e.match(new RegExp(this.pattern.replace(s,"|"))),$=!!y)for(D=[],t=0,A=y.length;A>t;t++)C=y[t],D.push([e.indexOf(C),C.length-1]);return{isMatch:$,score:$?.5:1,matchedIndices:D}}for(i=_.location,o=e.length,r=_.threshold,a=e.indexOf(this.pattern,i),w=[],t=0;o>t;t++)w[t]=0;for(-1!=a&&(r=Math.min(this._bitapScore(0,a),r),a=e.lastIndexOf(this.pattern,i+this.patternLen),-1!=a&&(r=Math.min(this._bitapScore(0,a),r))),a=-1,m=1,v=[],p=this.patternLen+o,t=0;t<this.patternLen;t++){for(c=0,l=p;l>c;)this._bitapScore(t,i+l)<=r?c=l:p=l,l=Math.floor((p-c)/2+c);for(p=l,h=Math.max(1,i-l+1),u=Math.min(i+l,o)+this.patternLen,d=Array(u+2),d[u+1]=(1<<t)-1,n=u;n>=h;n--)if(g=this.patternAlphabet[e.charAt(n-1)],g&&(w[n-1]=1),d[n]=0===t?(d[n+1]<<1|1)&g:(d[n+1]<<1|1)&g|((f[n+1]|f[n])<<1|1)|f[n+1],d[n]&this.matchmask&&(m=this._bitapScore(t,n-1),r>=m)){if(r=m,a=n-1,v.push(a),!(a>i))break;h=Math.max(1,2*i-a)}if(this._bitapScore(t+1,i)>r)break;f=d}return D=this._getMatchedIndices(w),{isMatch:a>=0,score:0===m?.001:m,matchedIndices:D}},r.prototype._getMatchedIndices=function(e){for(var t,n=[],o=-1,i=-1,r=0,s=s=e.length;s>r;r++)t=e[r],t&&-1===o?o=r:t||-1===o||(i=r-1,n.push([o,i]),o=-1);return e[r-1]&&n.push([o,r-1]),n},"object"==typeof exports?module.exports=n:"function"==typeof define&&define.amd?define(function(){return n}):e.Fuse=n}(this);var e=angular.module("Reselect",["reselect.templates"]);e.service("ReselectDataAdapter",["$q",function(e){var t=function(){this.data=[]};return t.prototype.observe=function(){console.error("Not implemented")},t.prototype.prepareGetData=function(){},t.prototype.getData=function(t){var n,o=this,i=e.defer(),r={};if(t){var s=new Fuse(this.data,r);n=s.search(t),angular.isDefined(r.keys)&&(n=n.map(function(e){return o.data[e]}))}else n=this.data;return i.resolve({data:n}),i.promise},t.prototype.updateData=function(e){return this.data=e,this.data},t.prototype.init=function(){this.observe(this.updateData.bind(this))},t}]),e.service("ReselectAjaxDataAdapter",["$http",function(e){var t=function(e){this.data=[],this.page=1,this.pagination={},this.options=angular.extend({params:function(e){return e}},e)};return t.prototype.observe=function(){},t.prototype.prepareGetData=function(){},t.prototype.getData=function(t){var n,o=this,i={page:this.page,search_term:t},r=this.options.params(i,o.pagination);return n="function"==typeof this.options.endpoint?this.options.endpoint(i,o.pagination):this.options.endpoint,e.get(n,{params:r}).then(function(e){return e.data}).then(this.options.onData).then(function(e){return e.pagination?(o.pagination=e.pagination,e.pagination.more&&(o.page+=1)):o.pagination=null,e})},t.prototype.updateData=function(e,t){return this.data=t===!0?this.data.concat(e):e,this.data},t.prototype.init=function(){},t}]);var t=function(e,t){var n=e.reselect=this;n.options=angular.extend({},e.reselectOptions,t),n.rendered_placeholder=n.options.placeholderTemplate()};t.$inject=["$scope","reselectDefaultOptions"],angular.module("reselect.controller",[]).controller("reselect.directive.ctrl",t),e.value("reselectDefaultOptions",{placeholderTemplate:function(){return"Select an option"},selectionTemplate:angular.element('<span ng-bind="$selection"></span>')}).directive("reselect",["$compile",function(e){return{restrict:"AE",templateUrl:"templates/reselect.directive.tpl.html",require:["^reselect","^ngModel"],transclude:!0,replace:!0,scope:!0,link:function(t,n,o,i,r){var s=i[0],a=null;r(t,function(e){a=e,n.append(e)}).detach(),a=angular.element("<div>").append(a);var c=a[0].querySelectorAll(".reselect-choices, [reselect-choices], reselect-choices");angular.element(n[0].querySelectorAll(".reselect-dropdown")).append(c);var l=a[0].querySelectorAll(".reselect-selection, [reselect-selection], reselect-selection");l=l.length?l:s.options.selectionTemplate.clone(),angular.element(n[0].querySelectorAll(".reselect-rendered-selection")).append(l);var p=angular.element(a[0].querySelectorAll(".reselect-no-choice, [reselect-selection], reselect-selection"));1===p.length&&angular.element(n[0].querySelectorAll(".reselect-empty-container")).html("").append(p),s.transcludeCtrls.$ReselectChoice=angular.element(c).controller("reselectChoices"),e(l)(s.selection_scope)},controllerAs:"$reselect",controller:["$scope","$element","reselectDefaultOptions","$timeout","KEYS",function(e,t,n,o,i){function r(n){t[0].contains(n.target)||(e.$apply(function(){s.hideDropdown()}),angular.element(document).off("click",r))}var s=this,a=t.controller("ngModel");return s.options=angular.extend({},n,e.reselectOptions),s.value=null,s.opened=!1,s.transcludeCtrls={},s.rendered_placeholder=null,s.renderPlaceholder=function(){s.rendered_placeholder=s.options.placeholderTemplate()},s.selection_scope=e.$new(),s.selection_scope.$selection=null,s.rendered_selection=null,s.renderSelection=function(e,t){s.selection_scope.$selection=e,s.selection_scope.$choice=t},s.selectValue=function(e,t){a.$setViewValue(e),s.value=e,s.renderSelection(s.value,t),s.hideDropdown()},a.$render=function(){var e,t=a.$viewValue;if(!s.options.allowInvalid&&angular.isDefined(t)){for(var n,o,i=s.transcludeCtrls.$ReselectChoice.DataAdapter.data,r=(s.transcludeCtrls.$ReselectChoice.parsedOptions.trackByExp,0);r<i.length;r++)if(angular.isDefined(i[r])){var c={};if(c[s.transcludeCtrls.$ReselectChoice.parsedOptions.itemName]=i[r],n=s.transcludeCtrls.$ReselectChoice.parsedOptions.modelMapper(c),o=t,n===o){e=i[r];break}}}else e=t;if(e)s.selectValue(a.$viewValue,e);else if(s.options.resolveInvalid&&"function"==typeof s.options.resolveInvalid){var l=function(t){void 0!==t?s.selectValue(t):a.$setViewValue(e)};s.options.resolveInvalid(t,l)}else a.$setViewValue(e)},s.parsedOptions=null,s.choices=[],s.handleKeyDown=function(e){var t=e.which;s.opened?(t===i.ESC||t===i.TAB)&&(s.hideDropdown(),e.preventDefault()):(t===i.ENTER||t===i.SPACE)&&(s.showDropdown(),e.preventDefault())},s.toggleDropdown=function(){s.opened?s.hideDropdown():s.showDropdown()},s.showDropdown=function(){s.opened=!0,s.transcludeCtrls.$ReselectChoice.getData(!0),e.$emit("reselect.search.focus"),angular.element(document).on("click",r)},s.hideDropdown=function(){s.opened=!1,e.$emit("reselect.input.focus")},s.initialize=function(){s.renderPlaceholder()},s.initialize(),s}]}}]),e.service("LazyScroller",["LazyContainer","$compile",function(e,t){var n={scopeName:"$choice"},o=function(e,t){var o=this;o.options=angular.extend({},n,t),o.$scope=e,o.$container=o.options.container,o.$list=o.options.list,o.choices=[],o.lazyContainers=[],o.numLazyContainers=Math.ceil(o.options.listHeight/o.options.choiceHeight)+2,o.lastCheck=null,o.lastScrollTop=null};return o.prototype.renderContainer=function(){var e=this,t=e.choices.length*e.options.choiceHeight,n=t>e.options.listHeight?e.options.listHeight:t;return e.$container.css("height",(n||e.options.choiceHeight)+"px"),e.$list.css("height",t+"px"),{choiceHeight:t,containerHeight:n}},o.prototype.bindScroll=function(){var e=this;e.$container.on("scroll",function(){window.requestAnimationFrame(function(){e._calculateLazyRender()})})},o.prototype._shouldRender=function(e){var t=this;return!("number"==typeof t.lastCheck&&e<=t.lastCheck+(t.options.choiceHeight-t.lastCheck%t.options.choiceHeight)&&e>=t.lastCheck-t.lastCheck%t.options.choiceHeight)},o.prototype._calculateLazyRender=function(e){var t=this,n=e===!0?t.lastScrollTop:t.$container[0].scrollTop;if(t.lastScrollTop=n,e===!0||t._shouldRender(n)){var o=[],i=[];angular.forEach(t.lazyContainers,function(r){var s=r.index*t.options.choiceHeight||0;e===!0&&(r.index=null),null===r.index||s<n-t.options.choiceHeight||s>n+t.options.listHeight+t.options.choiceHeight?(r.element.addClass("inactive").removeClass("active"),i.push(r)):(r.element.addClass("active").removeClass("inactive"),o.push(r))});var r=o.map(function(e){return e.index}),s=Math.floor(n/t.options.choiceHeight);s=0>s?0:s;var a=Math.ceil((n+t.options.listHeight)/t.options.choiceHeight);a=a>=t.choices.length?t.choices.length:a;for(var c=s;a>c;c++)if(!(r.indexOf(c)>=0)){var l=i.shift();l&&(l.element.addClass("active").removeClass("inactive"),l.index=c,l.render(t.options.choiceHeight),angular.extend(l.scope,{$containerId:l.containerId,$index:c}),l.scope[t.options.scopeName]=t.choices[c])}t.$scope.$evalAsync(),t.lastCheck=Math.floor(n/t.options.choiceHeight)*t.options.choiceHeight}},o.prototype.initialize=function(n){for(var o=this,i=0;i<o.numLazyContainers;i++){var r=n.clone(),s=o.$scope.$new();s.$options=o.$scope.$options,s[o.options.scopeName]={},t(r)(s),o.lazyContainers.push(new e({containerId:i,element:r,scope:s})),o.$list.append(r)}o.bindScroll()},o}]),e.service("LazyContainer",[function(){var e=function(e){var t=this;t.containerId=null,t.element=null,t.index=null,t.scope=null,angular.extend(t,e)};return e.prototype.render=function(e){var t=this;(t.element||null!==t.index)&&t.element.css("top",t.index*e+"px")},e}]),e.directive("reselectNoChoice",function(){return{restrict:"AE",replace:!0,transclude:!0,templateUrl:"templates/reselect-no-choice.directive.tpl.html"}}),angular.module("reselect.templates",[]).run(["$templateCache",function(e){e.put("templates/lazy-container.tpl.html",'<div class="reselect-dropdown"><div class="reselect-options-container"><div class="reselect-option reselect-option-choice" ng-show="!$reselect.choices.length">No Options</div><ul class="reselect-options-list"></ul></div></div>'),e.put("templates/reselect-no-choice.directive.tpl.html",'<div class="reselect-no-choice" ng-transclude=""></div>'),e.put("templates/reselect.choice.tpl.html",""),e.put("templates/reselect.directive.tpl.html",'<div class="reselect-container reselect" ng-keydown="$reselect.handleKeyDown($event)"><input type="hidden" value="{{ngModel}}"><div class="reselect-selection" tabindex="0" focus-on="reselect.input.focus" ng-class="{\'reselect-selection--active\' : $reselect.opened }" ng-click="$reselect.toggleDropdown()"><div class="reselect-rendered reselect-rendered-selection" ng-show="$reselect.value"></div><div class="reselect-rendered reselect-rendered-placeholder" ng-show="!$reselect.value" ng-bind="$reselect.rendered_placeholder"></div><div class="reselect-arrow-container"><div class="reselect-arrow"></div></div></div><div class="reselect-dropdown" ng-class="{\'reselect-dropdown--opened\' : $reselect.opened }"></div></div>'),e.put("templates/reselect.options.directive.tpl.html",'<div class="reselect-choices"><div class="reselect-search-container"><input class="reselect-search-input" type="text" focus-on="reselect.search.focus" placeholder="Type to search..." ng-model="$options.search_term" ng-change="$options.search()"></div><div class="reselect-options-container" ng-class="{\'reselect-options-container--autoheight\': !$options.DataAdapter.data.length && !$options.is_loading }" trigger-at-bottom="$options.loadMore()"><ul class="reselect-options-list" ng-show="$options.DataAdapter.data.length"></ul><div class="reselect-static-option reselect-empty-container" ng-show="!$options.DataAdapter.data.length && !$options.is_loading"><div class="reselect-option reselect-option--static reselect-option-choice">{{$options.options.noOptionsText}}</div></div><div class="reselect-option reselect-static-option reselect-option-loading" ng-show="$options.is_loading">Loading More</div></div></div>')}]),e.value("reselectChoicesOptions",{noOptionsText:"No Options"}),e.directive("triggerAtBottom",["$parse","ReselectUtils",function(e,t){var n=function(e){return e=e[0]||e,isNaN(e.offsetHeight)?e.document.documentElement.clientHeight:e.offsetHeight};return{restrict:"A",link:function(o,i,r){function s(){(n(i)+i[0].scrollTop!==0||0!==i[0].scrollHeight)&&(n(i)+i[0].scrollTop>=i[0].scrollHeight-30&&c(),a=!1)}var a=!1,c=t.debounce(function(){e(r.triggerAtBottom)(o)},150);i.on("scroll",function(){a||(window.requestAnimationFrame?window.requestAnimationFrame(s):setTimeout(s,300),a=!0)}),s()}}}]),e.directive("reselectChoices",["ChoiceParser","$compile","LazyScroller","LazyContainer","ReselectUtils","reselectChoicesOptions",function(e,t,n,o,i,r){return{restrict:"AE",templateUrl:"templates/reselect.options.directive.tpl.html",require:["reselectChoices","?^reselect"],transclude:!0,replace:!0,compile:function(e,t){if(!t.options&&!t.remote)throw new Error('"reselect-options" directive requires the [options] or [remote] attribute.');return function(e,t,n,o,i){{var r=o[0];o[1]}i(function(e){r.CHOICE_TEMPLATE.append(e)}),r.LazyDropdown.initialize(r.CHOICE_TEMPLATE),r.LazyDropdown.renderContainer()}},controllerAs:"$options",controller:["$scope","$element","$attrs","$parse","$http","ReselectDataAdapter","ReselectAjaxDataAdapter",function(t,o,s,a,c,l,p){var h=this;h.element=o[0],h.$container=angular.element(h.element.querySelectorAll(".reselect-options-container")),h.$list=angular.element(h.element.querySelectorAll(".reselect-options-list")),h.choiceHeight=36,h.listHeight=300,h.search_term="",h.remotePagination={},h.CHOICE_TEMPLATE=angular.element('<li class="reselect-option reselect-option-choice" ng-click="$options._selectChoice($containerId)"></li>'),h.CHOICE_TEMPLATE.attr("ng-class","{'reselect-option-choice--highlight' : $options.activeIndex === $index }"),h.CHOICE_TEMPLATE.attr("ng-mouseenter","$options.activeIndex = $index"),h.CHOICE_TEMPLATE.attr("ng-mouseleave","$options.activeIndex = null");var u=o.controller("reselect");h.options=angular.extend({},r,s.reselectChoices||{}),h.options.noOptionsText=s.noOptionsText||h.options.noOptionsText,h.DataAdapter=null,s.options?(h.parsedOptions=e.parse(s.options),h.DataAdapter=new l,h.DataAdapter.updateData(h.parsedOptions.source(t.$parent)),h.DataAdapter.observe=function(){t.$watchCollection(function(){return h.parsedOptions.source(t.$parent)},function(e){h.DataAdapter.updateData(e)})}):s.remote&&(h.parsedOptions=a(s.remote)(t.$parent),h.DataAdapter=new p(h.parsedOptions),h.DataAdapter.prepareGetData=function(){h.DataAdapter.page=1,h.DataAdapter.pagination={},h.DataAdapter.updateData([]),h.render()}),h.DataAdapter.init(),h.getData=function(e,t){e===!0&&h.DataAdapter.prepareGetData(),h.is_loading=!0,h.DataAdapter.getData(h.search_term).then(function(e){h.search_term?h.render(e.data):(h.DataAdapter.updateData(e.data,t),h.render())}).finally(function(){h.is_loading=!1})},h.loadMore=function(){h.DataAdapter.pagination&&h.DataAdapter.pagination.more&&h.getData(!1,!0)},h.search=i.debounce(function(){h.getData(!0,!1)},300,!1,function(){h.is_loading=!0}),h.LazyDropdown=new n(t,{scopeName:h.parsedOptions.itemName,container:h.$container,list:h.$list,choiceHeight:36,listHeight:300}),h.activeIndex=null,h._setActiveIndex=function(e){h.activeIndex=e},h._selectChoice=function(e){var t=h.LazyDropdown.lazyContainers[e].scope,n=angular.copy(h.parsedOptions.modelMapper(t));u.selectValue(n,t[h.parsedOptions.itemName])},h.$parent=o.parent(),h.render=function(e){if(h.LazyDropdown.choices=e||h.DataAdapter.data,h.LazyDropdown.choices&&h.LazyDropdown.choices.length){var t=h.LazyDropdown.renderContainer();h.LazyDropdown._calculateLazyRender(!0),h.LazyDropdown.choices&&h.LazyDropdown.choices.length&&t.containerHeight>=t.choiceHeight&&h.loadMore()}}}]}}]),e.service("ChoiceParser",["$parse",function(e){var t=this;t.parse=function(t){var n;if(n=t.match(/^\s*(?:([\s\S]+?)\s+as\s+)?(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(\s*[\s\S]+?)?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),!n)throw uiSelectMinErr("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",t);var o=n[5],i="";if(n[3]){o=n[5].replace(/(^\()|(\)$)/g,"");var r=n[5].match(/^\s*(?:[\s\S]+?)(?:[^\|]|\|\|)+([\s\S]*)\s*$/);r&&r[1].trim()&&(i=r[1],o=o.replace(i,""))}return{itemName:n[4]||n[2],keyName:n[3],source:e(o),filters:i,trackByExp:n[6],modelMapper:e(n[1]||n[4]||n[2]),repeatExpression:function(e){var t=this.itemName+" in "+(e?"$group.items":"$select.items");return this.trackByExp&&(t+=" track by "+this.trackByExp),t}}}}]),e.factory("ReselectUtils",function(){var e={debounce:function(e,t,n,o){var i;return function(){var r=this,s=arguments,a=function(){i=null,n||e.apply(r,s)},c=n&&!i;clearTimeout(i),i=setTimeout(a,t),c&&e.apply(r,s),o&&o.apply(r,s)}}};return e}),e.filter("rshighlight",["$sce",function(e){return function(t,n){var o,i,r,s="reselect-text-match";return r=new RegExp(n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"ig"),t?n?(t.match&&t.replace||(t=t.toString()),i=t.match(r),o=i?t.replace(r,'<span class="'+s+'">'+i[0]+"</span>"):t,e.trustAsHtml(o)):t:void 0}}]),e.directive("focusOn",["$timeout",function(e){return{restrict:"A",link:function(t,n,o){t.$on(o.focusOn,function(){e(function(){n[0].focus()})})}}}]),e.constant("KEYS",{BACKSPACE:8,TAB:9,ENTER:13,CTRL:17,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46})}).apply(this);
=======
 * Version: 0.0.1 - 2016-04-29T04:24:55.226Z
 * License: MIT
 */
(function(){"use strict";!function(e){function t(){console.log.apply(console,arguments)}function n(e,t){var n,o,i,r;for(this.list=e,this.options=t=t||{},n=0,r=["sort","shouldSort","verbose","tokenize"],o=r.length;o>n;n++)i=r[n],this.options[i]=i in t?t[i]:a[i];for(n=0,r=["searchFn","sortFn","keys","getFn","include"],o=r.length;o>n;n++)i=r[n],this.options[i]=t[i]||a[i]}function o(e,t,n){var r,s,a,c,l,p;if(t){if(a=t.indexOf("."),-1!==a?(r=t.slice(0,a),s=t.slice(a+1)):r=t,c=e[r],null!==c&&void 0!==c)if(s||"string"!=typeof c&&"number"!=typeof c)if(i(c))for(l=0,p=c.length;p>l;l++)o(c[l],s,n);else s&&o(c,s,n);else n.push(c)}else n.push(e);return n}function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function r(e,t){t=t||{},this.options=t,this.options.location=t.location||r.defaultOptions.location,this.options.distance="distance"in t?t.distance:r.defaultOptions.distance,this.options.threshold="threshold"in t?t.threshold:r.defaultOptions.threshold,this.options.maxPatternLength=t.maxPatternLength||r.defaultOptions.maxPatternLength,this.pattern=t.caseSensitive?e:e.toLowerCase(),this.patternLen=e.length,this.patternLen<=this.options.maxPatternLength&&(this.matchmask=1<<this.patternLen-1,this.patternAlphabet=this._calculatePatternAlphabet())}var s=/ +/g,a={id:null,caseSensitive:!1,include:[],shouldSort:!0,searchFn:r,sortFn:function(e,t){return e.score-t.score},getFn:o,keys:[],verbose:!1,tokenize:!1};n.VERSION="2.2.0",n.prototype.set=function(e){return this.list=e,e},n.prototype.search=function(e){this.options.verbose&&t("\nSearch term:",e,"\n"),this.pattern=e,this.results=[],this.resultMap={},this._keyMap=null,this._prepareSearchers(),this._startSearch(),this._computeScore(),this._sort();var n=this._format();return n},n.prototype._prepareSearchers=function(){var e=this.options,t=this.pattern,n=e.searchFn,o=t.split(s),i=0,r=o.length;if(this.options.tokenize)for(this.tokenSearchers=[];r>i;i++)this.tokenSearchers.push(new n(o[i],e));this.fullSeacher=new n(t,e)},n.prototype._startSearch=function(){var e,t,n,o,i=this.options,r=i.getFn,s=this.list,a=s.length,c=this.options.keys,l=c.length,p=null;if("string"==typeof s[0])for(n=0;a>n;n++)this._analyze("",s[n],n,n);else for(this._keyMap={},n=0;a>n;n++)for(p=s[n],o=0;l>o;o++){if(e=c[o],"string"!=typeof e){if(t=1-e.weight||1,this._keyMap[e.name]={weight:t},e.weight<=0||e.weight>1)throw new Error("Key weight has to be > 0 and <= 1");e=e.name}else this._keyMap[e]={weight:1};this._analyze(e,r(p,e,[]),p,n)}},n.prototype._analyze=function(e,n,o,r){var a,c,l,p,h,u,d,f,g,m,v,y,$,w,D,A=this.options,C=!1;if(void 0!==n&&null!==n)if(c=[],"string"==typeof n){if(a=n.split(s),A.verbose&&t("---------\nKey:",e),A.verbose&&t("Record:",a),this.options.tokenize){for(l=this.tokenSearchers,p=l.length,w=0;w<this.tokenSearchers.length;w++){for(m=this.tokenSearchers[w],v=[],D=0;D<a.length;D++)y=a[D],$=m.search(y),$.isMatch?(C=!0,v.push($.score),c.push($.score)):(v.push(1),c.push(1));A.verbose&&t("Token scores:",v)}for(u=c[0],f=c.length,w=1;f>w;w++)u+=c[w];u/=f,A.verbose&&t("Token score average:",u)}g=this.fullSeacher.search(n),A.verbose&&t("Full text score:",g.score),d=g.score,void 0!==u&&(d=(d+u)/2),A.verbose&&t("Score average:",d),(C||g.isMatch)&&(h=this.resultMap[r],h?h.output.push({key:e,score:d,matchedIndices:g.matchedIndices}):(this.resultMap[r]={item:o,output:[{key:e,score:d,matchedIndices:g.matchedIndices}]},this.results.push(this.resultMap[r])))}else if(i(n))for(w=0;w<n.length;w++)this._analyze(e,n[w],o,r)},n.prototype._computeScore=function(){var e,n,o,i,r,s,a,c,l,p=this._keyMap,h=this.results;for(this.options.verbose&&t("\n\nComputing score:\n"),e=0;e<h.length;e++){for(o=0,i=h[e].output,r=i.length,c=1,n=0;r>n;n++)s=i[n].score,a=p?p[i[n].key].weight:1,l=s*a,1!==a?c=Math.min(c,l):(o+=l,i[n].nScore=l);h[e].score=1===c?o/r:c,this.options.verbose&&t(h[e])}},n.prototype._sort=function(){var e=this.options;e.shouldSort&&(e.verbose&&t("\n\nSorting...."),this.results.sort(e.sortFn))},n.prototype._format=function(){var e,n,o,i,r,s=this.options,a=s.getFn,c=[],l=this.results,p=s.include;for(s.verbose&&t("\n\nOutput:\n\n",l),i=s.id?function(e){l[e].item=a(l[e].item,s.id,[])[0]}:function(){},r=function(e){var t,n,o,i,r,s=l[e];if(p.length>0){if(t={item:s.item},-1!==p.indexOf("matches"))for(o=s.output,t.matches=[],n=0;n<o.length;n++)i=o[n],r={indices:i.matchedIndices},i.key&&(r.key=i.key),t.matches.push(r);-1!==p.indexOf("score")&&(t.score=l[e].score)}else t=s.item;return t},n=0,o=l.length;o>n;n++)i(n),e=r(n),c.push(e);return c},r.defaultOptions={location:0,distance:100,threshold:.6,maxPatternLength:32},r.prototype._calculatePatternAlphabet=function(){var e={},t=0;for(t=0;t<this.patternLen;t++)e[this.pattern.charAt(t)]=0;for(t=0;t<this.patternLen;t++)e[this.pattern.charAt(t)]|=1<<this.pattern.length-t-1;return e},r.prototype._bitapScore=function(e,t){var n=e/this.patternLen,o=Math.abs(this.options.location-t);return this.options.distance?n+o/this.options.distance:o?1:n},r.prototype.search=function(e){var t,n,o,i,r,a,c,l,p,h,u,d,f,g,m,v,y,$,w,D,A,C,_=this.options;if(e=_.caseSensitive?e:e.toLowerCase(),this.pattern===e)return{isMatch:!0,score:0,matchedIndices:[[0,e.length-1]]};if(this.patternLen>_.maxPatternLength){if(y=e.match(new RegExp(this.pattern.replace(s,"|"))),$=!!y)for(D=[],t=0,A=y.length;A>t;t++)C=y[t],D.push([e.indexOf(C),C.length-1]);return{isMatch:$,score:$?.5:1,matchedIndices:D}}for(i=_.location,o=e.length,r=_.threshold,a=e.indexOf(this.pattern,i),w=[],t=0;o>t;t++)w[t]=0;for(-1!=a&&(r=Math.min(this._bitapScore(0,a),r),a=e.lastIndexOf(this.pattern,i+this.patternLen),-1!=a&&(r=Math.min(this._bitapScore(0,a),r))),a=-1,m=1,v=[],p=this.patternLen+o,t=0;t<this.patternLen;t++){for(c=0,l=p;l>c;)this._bitapScore(t,i+l)<=r?c=l:p=l,l=Math.floor((p-c)/2+c);for(p=l,h=Math.max(1,i-l+1),u=Math.min(i+l,o)+this.patternLen,d=Array(u+2),d[u+1]=(1<<t)-1,n=u;n>=h;n--)if(g=this.patternAlphabet[e.charAt(n-1)],g&&(w[n-1]=1),d[n]=0===t?(d[n+1]<<1|1)&g:(d[n+1]<<1|1)&g|((f[n+1]|f[n])<<1|1)|f[n+1],d[n]&this.matchmask&&(m=this._bitapScore(t,n-1),r>=m)){if(r=m,a=n-1,v.push(a),!(a>i))break;h=Math.max(1,2*i-a)}if(this._bitapScore(t+1,i)>r)break;f=d}return D=this._getMatchedIndices(w),{isMatch:a>=0,score:0===m?.001:m,matchedIndices:D}},r.prototype._getMatchedIndices=function(e){for(var t,n=[],o=-1,i=-1,r=0,s=s=e.length;s>r;r++)t=e[r],t&&-1===o?o=r:t||-1===o||(i=r-1,n.push([o,i]),o=-1);return e[r-1]&&n.push([o,r-1]),n},"object"==typeof exports?module.exports=n:"function"==typeof define&&define.amd?define(function(){return n}):e.Fuse=n}(this);var e=angular.module("Reselect",["reselect.templates"]);e.service("ReselectDataAdapter",["$q",function(e){var t=function(){this.data=[]};return t.prototype.observe=function(){console.error("Not implemented")},t.prototype.prepareGetData=function(){},t.prototype.getData=function(t){var n,o=this,i=e.defer(),r={};if(t){var s=new Fuse(this.data,r);n=s.search(t),angular.isDefined(r.keys)&&(n=n.map(function(e){return o.data[e]}))}else n=this.data;return i.resolve({data:n}),i.promise},t.prototype.updateData=function(e){return this.data=e,this.data},t.prototype.init=function(){this.observe(this.updateData.bind(this))},t}]),e.service("ReselectAjaxDataAdapter",["$http",function(e){var t=function(e,t){this.data=[],this.page=1,this.pagination={},this.parsedOptions=t,this.options=angular.extend({params:function(e){return e}},e)};return t.prototype.observe=function(){},t.prototype.prepareGetData=function(){},t.prototype.getData=function(t){var n,o=this,i={page:this.page,search_term:t},r=this.options.params(i,o.pagination);return n="function"==typeof this.options.endpoint?this.options.endpoint(i,o.pagination):this.options.endpoint,e.get(n,{params:r}).then(function(e){return o.parsedOptions.source({$remote:e.data})}).then(this.options.onData).then(function(e){return e.pagination?(o.pagination=e.pagination,e.pagination.more&&(o.page+=1)):o.pagination=null,e})},t.prototype.updateData=function(e,t){return this.data=t===!0?this.data.concat(e):e,this.data},t.prototype.init=function(){},t}]);var t=function(e,t){var n=e.reselect=this;n.options=angular.extend({},e.reselectOptions,t),n.rendered_placeholder=n.options.placeholderTemplate()};t.$inject=["$scope","reselectDefaultOptions"],angular.module("reselect.controller",[]).controller("reselect.directive.ctrl",t),e.value("reselectDefaultOptions",{placeholderTemplate:function(){return"Select an option"},selectionTemplate:angular.element('<span ng-bind="$selection"></span>')}).directive("reselect",["$compile",function(e){return{restrict:"AE",templateUrl:"templates/reselect.directive.tpl.html",require:["^reselect","^ngModel"],transclude:!0,replace:!0,scope:!0,link:function(t,n,o,i,r){var s=i[0],a=null;r(t,function(e){a=e,n.append(e)}).detach(),a=angular.element("<div>").append(a);var c=a[0].querySelectorAll(".reselect-choices, [reselect-choices], reselect-choices");angular.element(n[0].querySelectorAll(".reselect-dropdown")).append(c);var l=a[0].querySelectorAll(".reselect-selection, [reselect-selection], reselect-selection");l=l.length?l:s.options.selectionTemplate.clone(),angular.element(n[0].querySelectorAll(".reselect-rendered-selection")).append(l);var p=angular.element(a[0].querySelectorAll(".reselect-no-choice, [reselect-selection], reselect-selection"));1===p.length&&angular.element(n[0].querySelectorAll(".reselect-empty-container")).html("").append(p),s.transcludeCtrls.$ReselectChoice=angular.element(c).controller("reselectChoices"),e(l)(s.selection_scope)},controllerAs:"$reselect",controller:["$scope","$element","reselectDefaultOptions","$timeout","KEYS",function(e,t,n,o,i){function r(n){t[0].contains(n.target)||(e.$apply(function(){s.hideDropdown()}),angular.element(document).off("click",r))}var s=this,a=t.controller("ngModel");return s.options=angular.extend({},n,e.reselectOptions),s.value=null,s.opened=!1,s.transcludeCtrls={},s.rendered_placeholder=null,s.renderPlaceholder=function(){s.rendered_placeholder=s.options.placeholderTemplate()},s.selection_scope=e.$new(),s.selection_scope.$selection=null,s.rendered_selection=null,s.renderSelection=function(e,t){s.selection_scope.$selection=e,s.selection_scope.$choice=t},s.selectValue=function(e,t){a.$setViewValue(e),s.value=e,s.renderSelection(s.value,t),s.hideDropdown()},a.$render=function(){var e,t=a.$viewValue;if(!s.options.allowInvalid&&angular.isDefined(t)){for(var n,o,i=s.transcludeCtrls.$ReselectChoice.DataAdapter.data,r=(s.transcludeCtrls.$ReselectChoice.parsedOptions.trackByExp,0);r<i.length;r++)if(angular.isDefined(i[r])){var c={};if(c[s.transcludeCtrls.$ReselectChoice.parsedOptions.itemName]=i[r],n=s.transcludeCtrls.$ReselectChoice.parsedOptions.modelMapper(c),o=t,n===o){e=i[r];break}}}else e=t;if(e)s.selectValue(a.$viewValue,e);else if(s.options.resolveInvalid&&"function"==typeof s.options.resolveInvalid){var l=function(t){void 0!==t?s.selectValue(t):a.$setViewValue(e)};s.options.resolveInvalid(t,l)}else a.$setViewValue(e)},s.parsedOptions=null,s.choices=[],s.handleKeyDown=function(e){var t=e.which;s.opened?(t===i.ESC||t===i.TAB)&&(s.hideDropdown(),e.preventDefault()):(t===i.ENTER||t===i.SPACE)&&(s.showDropdown(),e.preventDefault())},s.toggleDropdown=function(){s.opened?s.hideDropdown():s.showDropdown()},s.showDropdown=function(){s.opened=!0,s.transcludeCtrls.$ReselectChoice.getData(!0),e.$emit("reselect.search.focus"),angular.element(document).on("click",r)},s.hideDropdown=function(){s.opened=!1,e.$emit("reselect.input.focus")},s.initialize=function(){s.renderPlaceholder()},s.initialize(),s}]}}]),e.service("LazyScroller",["LazyContainer","$compile",function(e,t){var n={scopeName:"$choice"},o=function(e,t){var o=this;o.options=angular.extend({},n,t),o.$scope=e,o.$container=o.options.container,o.$list=o.options.list,o.choices=[],o.lazyContainers=[],o.numLazyContainers=Math.ceil(o.options.listHeight/o.options.choiceHeight)+2,o.lastCheck=null,o.lastScrollTop=null};return o.prototype.renderContainer=function(){var e=this,t=e.choices.length*e.options.choiceHeight,n=t>e.options.listHeight?e.options.listHeight:t;return e.$container.css("height",(n||e.options.choiceHeight)+"px"),e.$list.css("height",t+"px"),{choiceHeight:t,containerHeight:n}},o.prototype.bindScroll=function(){var e=this;e.$container.on("scroll",function(){window.requestAnimationFrame(function(){e._calculateLazyRender()})})},o.prototype._shouldRender=function(e){var t=this;return!("number"==typeof t.lastCheck&&e<=t.lastCheck+(t.options.choiceHeight-t.lastCheck%t.options.choiceHeight)&&e>=t.lastCheck-t.lastCheck%t.options.choiceHeight)},o.prototype._calculateLazyRender=function(e){var t=this,n=e===!0?t.lastScrollTop:t.$container[0].scrollTop;if(t.lastScrollTop=n,e===!0||t._shouldRender(n)){var o=[],i=[];angular.forEach(t.lazyContainers,function(r){var s=r.index*t.options.choiceHeight||0;e===!0&&(r.index=null),null===r.index||s<n-t.options.choiceHeight||s>n+t.options.listHeight+t.options.choiceHeight?(r.element.addClass("inactive").removeClass("active"),i.push(r)):(r.element.addClass("active").removeClass("inactive"),o.push(r))});var r=o.map(function(e){return e.index}),s=Math.floor(n/t.options.choiceHeight);s=0>s?0:s;var a=Math.ceil((n+t.options.listHeight)/t.options.choiceHeight);a=a>=t.choices.length?t.choices.length:a;for(var c=s;a>c;c++)if(!(r.indexOf(c)>=0)){var l=i.shift();l&&(l.element.addClass("active").removeClass("inactive"),l.index=c,l.render(t.options.choiceHeight),angular.extend(l.scope,{$containerId:l.containerId,$index:c}),l.scope[t.options.scopeName]=t.choices[c])}t.$scope.$evalAsync(),t.lastCheck=Math.floor(n/t.options.choiceHeight)*t.options.choiceHeight}},o.prototype.initialize=function(n){for(var o=this,i=0;i<o.numLazyContainers;i++){var r=n.clone(),s=o.$scope.$new();s.$options=o.$scope.$options,s[o.options.scopeName]={},t(r)(s),o.lazyContainers.push(new e({containerId:i,element:r,scope:s})),o.$list.append(r)}o.bindScroll()},o}]),e.service("LazyContainer",[function(){var e=function(e){var t=this;t.containerId=null,t.element=null,t.index=null,t.scope=null,angular.extend(t,e)};return e.prototype.render=function(e){var t=this;(t.element||null!==t.index)&&t.element.css("top",t.index*e+"px")},e}]),e.directive("reselectNoChoice",function(){return{restrict:"AE",replace:!0,transclude:!0,templateUrl:"templates/reselect-no-choice.directive.tpl.html"}}),e.value("reselectChoicesOptions",{noOptionsText:"No Options"}),e.directive("triggerAtBottom",["$parse","ReselectUtils",function(e,t){var n=function(e){return e=e[0]||e,isNaN(e.offsetHeight)?e.document.documentElement.clientHeight:e.offsetHeight};return{restrict:"A",link:function(o,i,r){function s(){(n(i)+i[0].scrollTop!==0||0!==i[0].scrollHeight)&&(n(i)+i[0].scrollTop>=i[0].scrollHeight-30&&c(),a=!1)}var a=!1,c=t.debounce(function(){e(r.triggerAtBottom)(o)},150);i.on("scroll",function(){a||(window.requestAnimationFrame?window.requestAnimationFrame(s):setTimeout(s,300),a=!0)}),s()}}}]),e.directive("reselectChoices",["ChoiceParser","$compile","LazyScroller","LazyContainer","ReselectUtils","reselectChoicesOptions",function(e,t,n,o,i,r){return{restrict:"AE",templateUrl:"templates/reselect.options.directive.tpl.html",require:["reselectChoices","?^reselect"],transclude:!0,replace:!0,compile:function(e,t){return t.options?function(e,t,n,o,i){{var r=o[0];o[1]}i(function(e){r.CHOICE_TEMPLATE.append(e)}),r.LazyDropdown.initialize(r.CHOICE_TEMPLATE),r.LazyDropdown.renderContainer()}:(console.warn('"reselect-options" directive requires the [options] the attribute.'),void 0)},controllerAs:"$options",controller:["$scope","$element","$attrs","$parse","$http","ReselectDataAdapter","ReselectAjaxDataAdapter",function(t,o,s,a,c,l,p){var h=this;h.element=o[0],h.$container=angular.element(h.element.querySelectorAll(".reselect-options-container")),h.$list=angular.element(h.element.querySelectorAll(".reselect-options-list")),h.choiceHeight=36,h.listHeight=300,h.search_term="",h.remotePagination={},h.CHOICE_TEMPLATE=angular.element('<li class="reselect-option reselect-option-choice" ng-click="$options._selectChoice($containerId)"></li>'),h.CHOICE_TEMPLATE.attr("ng-class","{'reselect-option-choice--highlight' : $options.activeIndex === $index }"),h.CHOICE_TEMPLATE.attr("ng-mouseenter","$options.activeIndex = $index"),h.CHOICE_TEMPLATE.attr("ng-mouseleave","$options.activeIndex = null");var u=o.controller("reselect");h.options=angular.extend({},r,s.reselectChoices||{}),h.options.noOptionsText=s.noOptionsText||h.options.noOptionsText,h.DataAdapter=null,h.parsedOptions=e.parse(s.options),s.remote?(h.remoteOptions=a(s.remote)(t.$parent),h.DataAdapter=new p(h.remoteOptions,h.parsedOptions),h.DataAdapter.prepareGetData=function(){h.DataAdapter.page=1,h.DataAdapter.pagination={},h.DataAdapter.updateData([]),h.render()}):(h.DataAdapter=new l,h.DataAdapter.updateData(h.parsedOptions.source(t.$parent)),h.DataAdapter.observe=function(){t.$watchCollection(function(){return h.parsedOptions.source(t.$parent)},function(e){h.DataAdapter.updateData(e)})}),h.DataAdapter.init(),h.getData=function(e,t){e===!0&&h.DataAdapter.prepareGetData(),h.is_loading=!0,h.DataAdapter.getData(h.search_term).then(function(e){h.search_term?h.render(e.data):(h.DataAdapter.updateData(e.data,t),h.render())}).finally(function(){h.is_loading=!1})},h.loadMore=function(){h.DataAdapter.pagination&&h.DataAdapter.pagination.more&&h.getData(!1,!0)},h.search=i.debounce(function(){h.getData(!0,!1)},300,!1,function(){h.is_loading=!0}),h.LazyDropdown=new n(t,{scopeName:h.parsedOptions.itemName,container:h.$container,list:h.$list,choiceHeight:36,listHeight:300}),h.activeIndex=null,h._setActiveIndex=function(e){h.activeIndex=e},h._selectChoice=function(e){var t=h.LazyDropdown.lazyContainers[e].scope,n=angular.copy(h.parsedOptions.modelMapper(t));u.selectValue(n,t[h.parsedOptions.itemName])},h.$parent=o.parent(),h.render=function(e){if(h.LazyDropdown.choices=e||h.DataAdapter.data,h.LazyDropdown.choices&&h.LazyDropdown.choices.length){var t=h.LazyDropdown.renderContainer();h.LazyDropdown._calculateLazyRender(!0),h.LazyDropdown.choices&&h.LazyDropdown.choices.length&&t.containerHeight>=t.choiceHeight&&h.loadMore()}}}]}}]),e.service("ChoiceParser",["$parse",function(e){var t=this;t.parse=function(t){var n;if(n=t.match(/^\s*(?:([\s\S]+?)\s+as\s+)?(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(\s*[\s\S]+?)?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),!n)throw uiSelectMinErr("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",t);var o=n[5],i="";if(n[3]){o=n[5].replace(/(^\()|(\)$)/g,"");var r=n[5].match(/^\s*(?:[\s\S]+?)(?:[^\|]|\|\|)+([\s\S]*)\s*$/);r&&r[1].trim()&&(i=r[1],o=o.replace(i,""))}return{itemName:n[4]||n[2],keyName:n[3],source:e(o),sourceItem:o,filters:i,trackByExp:n[6],modelMapper:e(n[1]||n[4]||n[2]),repeatExpression:function(e){var t=this.itemName+" in "+(e?"$group.items":"$select.items");return this.trackByExp&&(t+=" track by "+this.trackByExp),t}}}}]),e.factory("ReselectUtils",function(){var e={debounce:function(e,t,n,o){var i;return function(){var r=this,s=arguments,a=function(){i=null,n||e.apply(r,s)},c=n&&!i;clearTimeout(i),i=setTimeout(a,t),c&&e.apply(r,s),o&&o.apply(r,s)}}};return e}),e.filter("rshighlight",["$sce",function(e){return function(t,n){var o,i,r,s="reselect-text-match";return r=new RegExp(n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"ig"),t?n?(t.match&&t.replace||(t=t.toString()),i=t.match(r),o=i?t.replace(r,'<span class="'+s+'">'+i[0]+"</span>"):t,e.trustAsHtml(o)):t:void 0}}]),e.directive("focusOn",["$timeout",function(e){return{restrict:"A",link:function(t,n,o){t.$on(o.focusOn,function(){e(function(){n[0].focus()})})}}}]),angular.module("reselect.templates",[]).run(["$templateCache",function(e){e.put("templates/lazy-container.tpl.html",'<div class="reselect-dropdown"><div class="reselect-options-container"><div class="reselect-option reselect-option-choice" ng-show="!$reselect.choices.length">No Options</div><ul class="reselect-options-list"></ul></div></div>'),e.put("templates/reselect-no-choice.directive.tpl.html",'<div class="reselect-no-choice" ng-transclude=""></div>'),e.put("templates/reselect.choice.tpl.html",""),e.put("templates/reselect.directive.tpl.html",'<div class="reselect-container reselect" ng-keydown="$reselect.handleKeyDown($event)"><input type="hidden" value="{{ngModel}}"><div class="reselect-selection" tabindex="0" focus-on="reselect.input.focus" ng-class="{\'reselect-selection--active\' : $reselect.opened }" ng-click="$reselect.toggleDropdown()"><div class="reselect-rendered reselect-rendered-selection" ng-show="$reselect.value"></div><div class="reselect-rendered reselect-rendered-placeholder" ng-show="!$reselect.value" ng-bind="$reselect.rendered_placeholder"></div><div class="reselect-arrow-container"><div class="reselect-arrow"></div></div></div><div class="reselect-dropdown" ng-class="{\'reselect-dropdown--opened\' : $reselect.opened }"></div></div>'),e.put("templates/reselect.options.directive.tpl.html",'<div class="reselect-choices"><div class="reselect-search-container"><input class="reselect-search-input" type="text" focus-on="reselect.search.focus" placeholder="Type to search..." ng-model="$options.search_term" ng-change="$options.search()"></div><div class="reselect-options-container" ng-class="{\'reselect-options-container--autoheight\': !$options.DataAdapter.data.length && !$options.is_loading }" trigger-at-bottom="$options.loadMore()"><ul class="reselect-options-list" ng-show="$options.DataAdapter.data.length"></ul><div class="reselect-static-option reselect-empty-container" ng-show="!$options.DataAdapter.data.length && !$options.is_loading"><div class="reselect-option reselect-option--static reselect-option-choice">{{$options.options.noOptionsText}}</div></div><div class="reselect-option reselect-static-option reselect-option-loading" ng-show="$options.is_loading">Loading More</div></div></div>')}]),e.constant("KEYS",{BACKSPACE:8,TAB:9,ENTER:13,CTRL:17,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46})}).apply(this);
>>>>>>> upstream/master
